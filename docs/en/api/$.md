# $ Function

$ is the factory function for Stream, used to create a stream. It is one of the most commonly used functions in the fluth library, similar to Promise.resolve() but supports continuous data emission.

## Type Definition

```typescript
export function $<T = any>(): Stream<T | undefined>
export function $<T = any>(data: T | PromiseLike<T>): Stream<T>
export function $<T = any>(data?: T | PromiseLike<T>) {
  return new Stream<T>(data)
}
```

## Parameters

- data (optional): Initial data for the stream
  - When no parameter is passed, an empty stream is created with value type T | undefined
  - When data is passed, a stream with initial value is created with value type T

## Return Value

Returns a Stream instance, which inherits from Observable and has the following features:

- Can actively push data (via [next](/en/api/stream#next) method)
- Supports immutable data updates (via [set](/en/api/observable#set) method)
- Supports chainable operations (via [then](/en/api/observable#then) method)
- Supports operators (via [pipe](/en/api/observable#pipe) method)
- Supports plugin system (via [use](/en/api/observable#use) method)

## Usage Scenarios

### 1. Create an empty stream

```typescript
import { $ } from 'fluth'

// Create an empty stream, initial value is undefined
const stream$ = $()
console.log(stream$.value) // undefined

// Subscribe to data changes
stream$.then((data) => {
  console.log('Received data:', data)
})

// Push data
stream$.next('hello') // Output: Received data: hello
stream$.next('world') // Output: Received data: world
```

### 2. Create a stream with initial value

```typescript
import { $ } from 'fluth'

// Create a stream with initial value
const stream$ = $('Initial Value')
console.log(stream$.value) // "Initial Value"

// Subscribe to data changes
stream$.then((data) => {
  console.log(data) // Output: Initial Value
})

// Continue to push new data
stream$.next('New Data') // Output: New Data
```

### 3. Create a stream of complex objects

```typescript
import { $ } from 'fluth'

// Create an object stream
const user$ = $({ name: 'John', age: 25, address: { city: 'Beijing' } })

// Subscribe to user info changes
user$.then((user) => {
  console.log('User info:', user)
})

// Use set method for immutable update
user$.set((user) => {
  user.age = 26
  user.address.city = 'Shanghai'
})
```

### 4. Create Promise-like stream

```typescript
const customThenable = {
  then: (onFulfilled: any) => {
    setTimeout(() => onFulfilled('custom-thenable-value'), 50)
  },
}

const stream$ = $(customThenable)
stream$.then((value) => {
  console.log('custom:', value)
})
```
